<ng-container *ngIf="scribeData$ | async as data">
  <ng-container *ngIf="layout$ | async as layout">
    <div class="app-layout" ngScribeLayout>
      <div class="toolbar-top">Toolbar Top</div>
      <div class="toolbar-left">
        <button class="sidebar-button" [disabled]="!data.manuscript" (click)="togglePanel('contentLeft')">
          <span id="leftButton" class="toolbar-button side-toolbar-button ml-4" [class.disabled]="!data.manuscript">
            <mat-icon class="icon-md" color="primary">home</mat-icon>
            Manuscript
          </span>
        </button>
      </div>
      <aside class="content-left" aria-label="content-left" *ngIf="layout.contentLeft === 'open'">
        <div class="toolbar flex-between pl-2">
          <p class="m-0">Manuscript</p>
          <div class="actions">
            <button class="icon-button-sm flex-center" mat-icon-button [matMenuTriggerFor]="menu">
              <mat-icon class="icon-sm">more_vert</mat-icon>
            </button>
            <button class="icon-button-sm flex-center" mat-icon-button (click)="togglePanel('contentLeft')">
              <mat-icon class="icon-sm">remove</mat-icon>
            </button>
          </div>
        </div>
        <ng-scribe-file-tree></ng-scribe-file-tree>
      </aside>
      <div class="content-main">
        <div class="content-tabs toolbar" *ngIf="data.manuscript">Content Tabs</div>
        <main>
          <router-outlet></router-outlet>
        </main>
      </div>
      <aside class="content-right" aria-label="content-right" *ngIf="layout.contentRight === 'open'">
        <div class="toolbar"></div>
        Sidebar Right
      </aside>
      <div class="toolbar-right">Toolbar Right</div>
      <aside class="content-bottom" aria-label="content-bottom" *ngIf="layout.contentBottom === 'open'">
        <div class="toolbar"></div>
        Sidebar Bottom
      </aside>
      <div class="toolbar-bottom">
        <button
          id="bottomButton"
          class="toolbar-button bottom-toolbar-button ml-4"
          (click)="togglePanel('contentBottom')"
          [disabled]="!data.timeline"
        >
          <mat-icon class="icon-md" color="primary">home</mat-icon>
          Timeline
        </button>
      </div>
    </div>
  </ng-container>
</ng-container>

<mat-menu #menu>
  <button mat-menu-item>Manuscript details</button>
  <button mat-menu-item>New Chapter</button>
  <button mat-menu-item>New Scene</button>
</mat-menu>
